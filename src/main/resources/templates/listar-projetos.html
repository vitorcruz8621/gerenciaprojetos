<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Listar Projetos</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	<script src="/js/produtos/remover-produtos.js" defer>	
        /*function confirmarDelecao(id) {
            if (confirm("Tem certeza que deseja deletar este projeto?")) {
                fetch(`/web/projetos/${id}`, {
                    method: 'DELETE',
                })
                .then(response => {
                    if (response.ok) {
                        // Atualiza a página para refletir a exclusão
                        window.location.reload();
                    } else {
                        alert("Ocorreu um erro ao tentar deletar o projeto.");
                    }
                })
                .catch(error => {
                    console.error('Erro:', error);
                    alert("Ocorreu um erro ao tentar deletar o projeto.");
                });
            }
        }*/
    </script>
</head>
<body>
    <div class="container">
        <h1 class="mt-5">Lista de Projetos</h1>

        <!-- Mensagem se não houver projetos -->
        <div th:if="${mensagem}" class="alert alert-info mt-4" role="alert">
            <span th:text="${mensagem}"></span>
        </div>

        <!-- Tabela de projetos -->
        <table class="table table-striped mt-4">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Título</th>
                    <th>Descrição</th>
                    <th>Data de Início</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="projeto : ${projetos}">
                    <td th:text="${projeto.idProjeto}"></td>
                    <td th:text="${projeto.titulo}"></td>
                    <td th:text="${projeto.descricao}"></td>
                    <td th:text="${projeto.dataInicio}"></td>
                    <td>
                        <button type="button" class="btn btn-danger" 
                                th:onclick="'confirmarDelecao(' + ${projeto.idProjeto} + ')'">
                            Deletar
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>